{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nvar _this = this,\n    _jsxFileName = \"/mnt/c/Users/SBS31/OneDrive/Desktop/real-SD/MiSu-v2/screens/Application/UserScreen.js\";\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Icon from \"@expo/vector-icons/MaterialIcons\";\nimport { connect } from 'react-redux';\nimport AppHeaderText from \"../../components/app/AppHeaderText\";\nimport AppText from \"../../components/app/AppText\";\nimport ShareModal from \"../../components/modals/ShareModal\";\nimport SmallIcon from \"../../components/SmallIcon\";\nimport { stopSharingAction } from \"../../redux/Action/stopSharing\";\nimport appStyle from \"../../styles/AppStyle\";\nimport getDeviceIcon from \"../../components/app/DeviceIcons\";\n\nvar DeviceItem = function DeviceItem(props) {\n  function formatDate(time) {\n    time = time.toString().match(/^([01]\\d|2[0-3])(:)([0-5]\\d)(:[0-5]\\d)?$/) || [time];\n\n    if (time.length > 1) {\n      time = time.slice(1);\n      time[5] = +time[0] < 12 ? 'AM' : 'PM';\n      time[0] = +time[0] % 12 || 12;\n    }\n\n    return time.join('');\n  }\n\n  var desc = '';\n  props.device.properties.forEach(function (x) {\n    return desc += x.name + ', ';\n  });\n  desc = desc.substring(0, desc.length - 2);\n  desc = desc.substring(0, 15) + (desc.length > 15 ? '...' : '');\n  var deviceName = props.device.name;\n  deviceName = deviceName.substring(0, 10) + (deviceName.length > 15 ? '...' : '');\n  var firstProp = props.device.properties[0];\n  var firstPropTimeRangeReoccuringStr = '';\n  if (firstProp.time_range_reoccuring == '' || firstProp.time_range_reoccuring == null) firstPropTimeRangeReoccuringStr = 'Everyday  ';else {\n    var tempCount = 0;\n\n    for (var i = 0; i < firstProp.time_range_reoccuring.length + 1; i++) {\n      if (tempCount >= 3 && i <= firstProp.time_range_reoccuring.length) {\n        tempCount = 0;\n        var dayCut = firstProp.time_range_reoccuring.substring(i - 3, i);\n        firstPropTimeRangeReoccuringStr += dayCut + ', ';\n      }\n\n      tempCount++;\n    }\n  }\n  firstPropTimeRangeReoccuringStr = firstPropTimeRangeReoccuringStr.substring(0, firstPropTimeRangeReoccuringStr.length - 2);\n  return React.createElement(TouchableOpacity, {\n    style: [{\n      flex: 1,\n      marginTop: 5\n    }],\n    onPress: function onPress() {\n      props.selected(props.device);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 3\n    }\n  }, React.createElement(View, {\n    style: appStyle.row,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 4\n    }\n  }, React.createElement(View, {\n    style: appStyle.rowLeft,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, React.createElement(Image, {\n    style: {\n      width: 35,\n      height: 35\n    },\n    source: getDeviceIcon(props.device.description),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 6\n    }\n  }), React.createElement(View, {\n    style: appStyle.column,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 6\n    }\n  }, React.createElement(AppText, {\n    style: {\n      marginTop: 0,\n      marginLeft: 10\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, deviceName))), React.createElement(View, {\n    style: appStyle.rowRight,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, React.createElement(AppText, {\n    style: {\n      paddingBottom: 12,\n      marginRight: 10,\n      fontSize: 14\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 6\n    }\n  }, \" \", desc), React.createElement(Image, {\n    style: {\n      width: 30,\n      height: 30,\n      marginTop: 3\n    },\n    source: require(\"../../assets/rightArrow.png\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 6\n    }\n  })), React.createElement(View, {\n    style: [appStyle.lineSeperatorAlt, {\n      marginTop: 5\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  })), React.createElement(View, {\n    style: appStyle.row,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 4\n    }\n  }, firstProp.unrestricted == 1 && React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 6\n    }\n  }, React.createElement(AppText, {\n    style: {\n      fontSize: 14,\n      marginTop: -4\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }\n  }, \"* Unrestricted Access\")), firstProp.time_range == 1 && React.createElement(View, {\n    style: [{\n      marginTop: -20,\n      top: 20\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 6\n    }\n  }, React.createElement(View, {\n    style: [appStyle.rowRight, {\n      right: 25\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }\n  }, React.createElement(AppText, {\n    style: {\n      fontSize: 12,\n      fontStyle: 'italic',\n      marginTop: -4\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 8\n    }\n  }, firstPropTimeRangeReoccuringStr)), React.createElement(View, {\n    style: appStyle.row,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }\n  }, React.createElement(AppText, {\n    style: {\n      fontSize: 14,\n      marginTop: -4\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 8\n    }\n  }, \"Scheduled \", firstProp.time_range_start_date.slice(0, -3), \" @\", ' ', formatDate(firstProp.time_range_start)), React.createElement(AppText, {\n    style: {\n      fontSize: 14,\n      marginTop: -4\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 8\n    }\n  }, ' ', \"to \", firstProp.time_range_end_date.slice(0, -3), \" @ \", formatDate(firstProp.time_range_end)))), firstProp.temporary == 1 && React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 6\n    }\n  }, React.createElement(AppText, {\n    style: {\n      fontSize: 14,\n      marginTop: -4\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }\n  }, \"Temporary until \", firstProp.temp_date.slice(0, -3), \",\", ' ', formatDate(firstProp.temp_time_range_end)))));\n};\n\nvar Header = function Header(props) {\n  return React.createElement(View, {\n    style: appStyle.column,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 3\n    }\n  }, React.createElement(View, {\n    style: appStyle.row,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 4\n    }\n  }, React.createElement(View, {\n    style: appStyle.rowLeft,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  }, React.createElement(AppHeaderText, {\n    style: {\n      paddingTop: 0,\n      fontWeight: 'bold'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 6\n    }\n  }, \"Shared Devices\")), React.createElement(View, {\n    style: [appStyle.rowRight, {\n      marginTop: -5,\n      marginRight: -5\n    }],\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 5\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return props.open();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 6\n    }\n  }, React.createElement(SmallIcon, {\n    img: require(\"../../assets/deviceAdd.png\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  })))));\n};\n\nvar Footer = function Footer(props) {\n  var createTwoButtonAlert = function createTwoButtonAlert(user) {\n    return Alert.alert('End sharing with ' + props.name, 'Are you sure? You will need to invite ' + props.name + ' again.', [{\n      text: 'Cancel'\n    }, {\n      text: 'End',\n      onPress: function onPress() {\n        return props.endSharing();\n      }\n    }], {\n      cancelable: false\n    });\n  };\n\n  return React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return createTwoButtonAlert();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 3\n    }\n  }, React.createElement(View, {\n    style: appStyle.redButton,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 4\n    }\n  }, React.createElement(AppText, {\n    style: {\n      color: 'white'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 5\n    }\n  }, \"End All Sharing\")));\n};\n\nvar UserScreen = function (_React$Component) {\n  _inherits(UserScreen, _React$Component);\n\n  var _super = _createSuper(UserScreen);\n\n  function UserScreen(props) {\n    var _this2;\n\n    _classCallCheck(this, UserScreen);\n\n    _this2 = _super.call(this, props);\n    _this2.state = {\n      loading: false,\n      refresh: false,\n      devices: [],\n      email: '',\n      name: '',\n      sharedAccount: {}\n    };\n    _this2.ModalRef = React.createRef();\n    return _this2;\n  }\n\n  _createClass(UserScreen, [{\n    key: \"UNSAFE_componentWillMount\",\n    value: function UNSAFE_componentWillMount() {\n      var navigation = this.props.navigation;\n      var sharedAcc = navigation.getParam('sharedAccount').sharedAccount;\n      var devices = sharedAcc.devices;\n      var guest_email = sharedAcc.guest_email;\n      var name = sharedAcc.name;\n\n      if (sharedAcc != null) {\n        this.setState({\n          email: guest_email,\n          name: name,\n          sharedAccount: sharedAcc\n        });\n      }\n\n      if (devices != null) {\n        this.setState({\n          devices: devices\n        });\n      }\n    }\n  }, {\n    key: \"UNSAFE_componentWillReceiveProps\",\n    value: function UNSAFE_componentWillReceiveProps(props) {\n      this.setState({\n        refresh: !this.state.refresh\n      });\n\n      if (!this.state.loading && props.StopShareState.loading) {\n        this.setState({\n          loading: true\n        });\n        this.props.screenProps.setLoadingTrue();\n      }\n\n      if (this.state.loading && !props.StopShareState.loading) {\n        this.setState({\n          loading: false\n        });\n        this.props.screenProps.setLoadingFalse();\n        this.props.navigation.navigate('Home');\n      }\n\n      if (props.sharedAccountsData != null) {\n        this.getSharedAccountDevicesFromRedux(this.state.email, props.sharedAccountsData.sharedAccounts);\n      }\n    }\n  }, {\n    key: \"openModal\",\n    value: function openModal() {\n      return _regeneratorRuntime.async(function openModal$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(this.setState({\n                selecteddevice: null\n              }));\n\n            case 2:\n              this.ModalRef.current.snapTo(0);\n\n            case 3:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"selectDevice\",\n    value: function selectDevice(device) {\n      var _this3 = this;\n\n      return _regeneratorRuntime.async(function selectDevice$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(Object.keys(this.props.devicesData.devices).map(function _callee(item, index) {\n                return _regeneratorRuntime.async(function _callee$(_context2) {\n                  while (1) {\n                    switch (_context2.prev = _context2.next) {\n                      case 0:\n                        if (!(_this3.props.devicesData.devices[item].title == device.name)) {\n                          _context2.next = 3;\n                          break;\n                        }\n\n                        _context2.next = 3;\n                        return _regeneratorRuntime.awrap(_this3.setState({\n                          selecteddevice: _this3.props.devicesData.devices[item]\n                        }));\n\n                      case 3:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }\n                }, null, null, null, Promise);\n              }));\n\n            case 2:\n              this.ModalRef.current.snapTo(0);\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"endAllSharing\",\n    value: function endAllSharing(login_id, devices, idToken) {\n      this.props.stopSharing(login_id, devices, idToken);\n    }\n  }, {\n    key: \"getSharedAccountDevicesFromRedux\",\n    value: function getSharedAccountDevicesFromRedux(email, sharedAccounts) {\n      var Account = sharedAccounts.find(function (faccount) {\n        return faccount.guest_email == email;\n      });\n\n      if (Account != null && Account.devices != null) {\n        this.setState({\n          devices: Account.devices\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      return React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 4\n        }\n      }, React.createElement(View, {\n        style: appStyle.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 5\n        }\n      }, React.createElement(View, {\n        style: [appStyle.card, {\n          paddingHorizontal: 20\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 6\n        }\n      }, React.createElement(Header, {\n        open: this.openModal.bind(this),\n        guest_email: this.state.email,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 7\n        }\n      }), React.createElement(View, {\n        style: [appStyle.lineSeperatorFullAlt, {\n          marginTop: 5\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 7\n        }\n      }), React.createElement(View, {\n        style: appStyle.column,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 7\n        }\n      }, this.state.devices != null && this.state.devices.map(function (device, index) {\n        return React.createElement(View, {\n          key: index,\n          style: {\n            height: 65\n          },\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 10\n          }\n        }, React.createElement(DeviceItem, {\n          key: index,\n          device: device,\n          navigation: _this4.props.navigation,\n          selected: _this4.selectDevice.bind(_this4),\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 11\n          }\n        }), React.createElement(View, {\n          style: [appStyle.lineSeperatorAlt],\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 11\n          }\n        }));\n      })), React.createElement(Footer, {\n        name: this.state.name,\n        endSharing: function endSharing() {\n          return _this4.endAllSharing(_this4.state.sharedAccount.login_credentials_id, _this4.state.devices, _this4.props.sessionData.idToken);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 7\n        }\n      }))), React.createElement(View, {\n        style: {\n          elevation: 5,\n          flex: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 5\n        }\n      }, React.createElement(ShareModal, {\n        ModalRef: this.ModalRef,\n        canEditUser: false,\n        selecteduser: this.state.sharedAccount,\n        selecteddevice: this.state.selecteddevice,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 6\n        }\n      })));\n    }\n  }]);\n\n  return UserScreen;\n}(React.Component);\n\nUserScreen.navigationOptions = function (_ref) {\n  var navigate = _ref.navigate,\n      navigation = _ref.navigation;\n  return {\n    headerTitle: navigation.getParam('sharedAccount').sharedAccount.name.slice(0, 22),\n    headerLeft: function headerLeft() {\n      return React.createElement(View, {\n        __self: UserScreen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 4\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: {\n          alignSelf: 'center',\n          marginTop: 16\n        },\n        onPress: function onPress() {\n          return navigation.navigate('Home');\n        },\n        __self: UserScreen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 5\n        }\n      }, React.createElement(Icon, {\n        name: \"arrow-back\",\n        size: 35,\n        style: {\n          marginLeft: 16,\n          marginBottom: 10\n        },\n        __self: UserScreen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 6\n        }\n      })));\n    },\n    headerRight: function headerRight() {\n      return React.createElement(View, {\n        __self: UserScreen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 22\n        }\n      });\n    }\n  };\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  header: {\n    flexDirection: 'row',\n    justifyContent: 'space-between'\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var devicesData = state.devicesData,\n      hubInfoData = state.hubInfoData,\n      sessionData = state.sessionData,\n      sharedAccountsData = state.sharedAccountsData,\n      StopShareState = state.StopShareState;\n  return {\n    devicesData: devicesData,\n    hubInfoData: hubInfoData,\n    sessionData: sessionData,\n    sharedAccountsData: sharedAccountsData,\n    StopShareState: StopShareState\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    stopSharing: function stopSharing(login_id, devices, idToken) {\n      dispatch(stopSharingAction(login_id, devices, idToken));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserScreen);","map":{"version":3,"sources":["/mnt/c/Users/SBS31/OneDrive/Desktop/real-SD/MiSu-v2/screens/Application/UserScreen.js"],"names":["React","Icon","connect","AppHeaderText","AppText","ShareModal","SmallIcon","stopSharingAction","appStyle","getDeviceIcon","DeviceItem","props","formatDate","time","toString","match","length","slice","join","desc","device","properties","forEach","x","name","substring","deviceName","firstProp","firstPropTimeRangeReoccuringStr","time_range_reoccuring","tempCount","i","dayCut","flex","marginTop","selected","row","rowLeft","width","height","description","column","marginLeft","rowRight","paddingBottom","marginRight","fontSize","require","lineSeperatorAlt","unrestricted","time_range","top","right","fontStyle","time_range_start_date","time_range_start","time_range_end_date","time_range_end","temporary","temp_date","temp_time_range_end","Header","paddingTop","fontWeight","open","Footer","createTwoButtonAlert","user","Alert","alert","text","onPress","endSharing","cancelable","redButton","color","UserScreen","state","loading","refresh","devices","email","sharedAccount","ModalRef","createRef","navigation","sharedAcc","getParam","guest_email","setState","StopShareState","screenProps","setLoadingTrue","setLoadingFalse","navigate","sharedAccountsData","getSharedAccountDevicesFromRedux","sharedAccounts","selecteddevice","current","snapTo","Object","keys","devicesData","map","item","index","title","login_id","idToken","stopSharing","Account","find","faccount","container","card","paddingHorizontal","openModal","bind","lineSeperatorFullAlt","selectDevice","endAllSharing","login_credentials_id","sessionData","elevation","Component","navigationOptions","headerTitle","headerLeft","alignSelf","marginBottom","headerRight","styles","StyleSheet","create","header","flexDirection","justifyContent","mapStateToProps","hubInfoData","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Alert, Image, StyleSheet, TouchableOpacity, View } from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { connect } from 'react-redux';\nimport AppHeaderText from '../../components/app/AppHeaderText';\nimport AppText from '../../components/app/AppText';\nimport ShareModal from '../../components/modals/ShareModal';\nimport SmallIcon from '../../components/SmallIcon';\nimport { stopSharingAction } from '../../redux/Action/stopSharing';\nimport appStyle from '../../styles/AppStyle';\nimport getDeviceIcon from '../../components/app/DeviceIcons';\n\nconst DeviceItem = (props) => {\n\tfunction formatDate(time) {\n\t\t// Check correct time format and split into components\n\t\ttime = time.toString().match(/^([01]\\d|2[0-3])(:)([0-5]\\d)(:[0-5]\\d)?$/) || [time];\n\n\t\tif (time.length > 1) {\n\t\t\t// If time format correct\n\t\t\ttime = time.slice(1); // Remove full string match value\n\t\t\ttime[5] = +time[0] < 12 ? 'AM' : 'PM'; // Set AM/PM\n\t\t\ttime[0] = +time[0] % 12 || 12; // Adjust hours\n\t\t}\n\t\treturn time.join(''); // return adjusted time or original string\n\t}\n\tvar desc = '';\n\tprops.device.properties.forEach((x) => (desc += x.name + ', '));\n\tdesc = desc.substring(0, desc.length - 2);\n\tdesc = desc.substring(0, 15) + (desc.length > 15 ? '...' : '');\n\n\tvar deviceName = props.device.name;\n\tdeviceName = deviceName.substring(0, 10) + (deviceName.length > 15 ? '...' : '');\n\n\tconst firstProp = props.device.properties[0];\n\tvar firstPropTimeRangeReoccuringStr = '';\n\tif (firstProp.time_range_reoccuring == '' || firstProp.time_range_reoccuring == null)\n\t\tfirstPropTimeRangeReoccuringStr = 'Everyday  ';\n\telse {\n\t\tvar tempCount = 0;\n\t\tfor (var i = 0; i < firstProp.time_range_reoccuring.length + 1; i++) {\n\t\t\t// Skip to every three letters to support the MonThuSat example\n\t\t\tif (tempCount >= 3 && i <= firstProp.time_range_reoccuring.length) {\n\t\t\t\ttempCount = 0;\n\t\t\t\tvar dayCut = firstProp.time_range_reoccuring.substring(i - 3, i);\n\t\t\t\t// Check if the time range is thursday for special case of using R to signify it\n\t\t\t\t// if(dayCut == \"Thu\")\n\t\t\t\t// {\n\t\t\t\t//     firstPropTimeRangeReoccuringStr += \"R, \";\n\t\t\t\t// }\n\t\t\t\t// // Check if the time range is sunday for special case of using U to signify it\n\t\t\t\t// else if(dayCut == \"Sun\")\n\t\t\t\t// {\n\t\t\t\t//     firstPropTimeRangeReoccuringStr += \"U, \";\n\t\t\t\t// }\n\t\t\t\t// else\n\t\t\t\t//     firstPropTimeRangeReoccuringStr += dayCut[0] + \", \";\n\t\t\t\tfirstPropTimeRangeReoccuringStr += dayCut + ', ';\n\t\t\t}\n\t\t\ttempCount++;\n\t\t}\n\t}\n\tfirstPropTimeRangeReoccuringStr = firstPropTimeRangeReoccuringStr.substring(\n\t\t0,\n\t\tfirstPropTimeRangeReoccuringStr.length - 2\n\t);\n\treturn (\n\t\t<TouchableOpacity\n\t\t\tstyle={[{ flex: 1, marginTop: 5 }]}\n\t\t\tonPress={() => {\n\t\t\t\tprops.selected(props.device);\n\t\t\t}}\n\t\t>\n\t\t\t{/* Display first row detailing the name, properties, and selection button*/}\n\t\t\t<View style={appStyle.row}>\n\t\t\t\t<View style={appStyle.rowLeft}>\n\t\t\t\t\t<Image style={{ width: 35, height: 35 }} source={getDeviceIcon(props.device.description)} />\n\t\t\t\t\t<View style={appStyle.column}>\n\t\t\t\t\t\t<AppText style={{ marginTop: 0, marginLeft: 10 }}>{deviceName}</AppText>\n\t\t\t\t\t</View>\n\t\t\t\t</View>\n\t\t\t\t<View style={appStyle.rowRight}>\n\t\t\t\t\t<AppText style={{ paddingBottom: 12, marginRight: 10, fontSize: 14 }}> {desc}</AppText>\n\t\t\t\t\t<Image\n\t\t\t\t\t\tstyle={{ width: 30, height: 30, marginTop: 3 }}\n\t\t\t\t\t\tsource={require('../../assets/rightArrow.png')}\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t\t<View style={[appStyle.lineSeperatorAlt, { marginTop: 5 }]} />\n\t\t\t</View>\n\t\t\t{/* Display second row detailing the access*/}\n\t\t\t<View style={appStyle.row}>\n\t\t\t\t{firstProp.unrestricted == 1 && (\n\t\t\t\t\t<View>\n\t\t\t\t\t\t<AppText style={{ fontSize: 14, marginTop: -4 }}>* Unrestricted Access</AppText>\n\t\t\t\t\t</View>\n\t\t\t\t)}\n\t\t\t\t{firstProp.time_range == 1 && (\n\t\t\t\t\t<View style={[{ marginTop: -20, top: 20 }]}>\n\t\t\t\t\t\t<View style={[appStyle.rowRight, { right: 25 }]}>\n\t\t\t\t\t\t\t<AppText style={{ fontSize: 12, fontStyle: 'italic', marginTop: -4 }}>\n\t\t\t\t\t\t\t\t{firstPropTimeRangeReoccuringStr}\n\t\t\t\t\t\t\t</AppText>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t\t<View style={appStyle.row}>\n\t\t\t\t\t\t\t<AppText style={{ fontSize: 14, marginTop: -4 }}>\n\t\t\t\t\t\t\t\tScheduled {firstProp.time_range_start_date.slice(0, -3)} @{' '}\n\t\t\t\t\t\t\t\t{formatDate(firstProp.time_range_start)}\n\t\t\t\t\t\t\t</AppText>\n\t\t\t\t\t\t\t<AppText style={{ fontSize: 14, marginTop: -4 }}>\n\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\tto {firstProp.time_range_end_date.slice(0, -3)} @ {formatDate(firstProp.time_range_end)}\n\t\t\t\t\t\t\t</AppText>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t</View>\n\t\t\t\t)}\n\t\t\t\t{firstProp.temporary == 1 && (\n\t\t\t\t\t<View>\n\t\t\t\t\t\t<AppText style={{ fontSize: 14, marginTop: -4 }}>\n\t\t\t\t\t\t\tTemporary until {firstProp.temp_date.slice(0, -3)},{' '}\n\t\t\t\t\t\t\t{formatDate(firstProp.temp_time_range_end)}\n\t\t\t\t\t\t</AppText>\n\t\t\t\t\t</View>\n\t\t\t\t)}\n\t\t\t</View>\n\t\t</TouchableOpacity>\n\t);\n};\n\nconst Header = (props) => {\n\treturn (\n\t\t<View style={appStyle.column}>\n\t\t\t<View style={appStyle.row}>\n\t\t\t\t<View style={appStyle.rowLeft}>\n\t\t\t\t\t<AppHeaderText style={{ paddingTop: 0, fontWeight: 'bold' }}>Shared Devices</AppHeaderText>\n\t\t\t\t</View>\n\t\t\t\t<View style={[appStyle.rowRight, { marginTop: -5, marginRight: -5 }]}>\n\t\t\t\t\t<TouchableOpacity onPress={() => props.open()}>\n\t\t\t\t\t\t<SmallIcon img={require('../../assets/deviceAdd.png')} />\n\t\t\t\t\t</TouchableOpacity>\n\t\t\t\t</View>\n\t\t\t</View>\n\t\t</View>\n\t);\n};\n\nconst Footer = (props) => {\n\tvar createTwoButtonAlert = (user) =>\n\t\tAlert.alert(\n\t\t\t'End sharing with ' + props.name,\n\t\t\t'Are you sure? You will need to invite ' + props.name + ' again.',\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\ttext: 'Cancel'\n\t\t\t\t},\n\t\t\t\t{ text: 'End', onPress: () => props.endSharing() }\n\t\t\t],\n\t\t\t{ cancelable: false }\n\t\t);\n\n\treturn (\n\t\t<TouchableOpacity onPress={() => createTwoButtonAlert()}>\n\t\t\t<View style={appStyle.redButton}>\n\t\t\t\t<AppText style={{ color: 'white' }}>End All Sharing</AppText>\n\t\t\t</View>\n\t\t</TouchableOpacity>\n\t);\n};\n\nclass UserScreen extends React.Component {\n\tstatic navigationOptions = ({ navigate, navigation }) => ({\n\t\theaderTitle: navigation.getParam('sharedAccount').sharedAccount.name.slice(0, 22),\n\t\theaderLeft: () => (\n\t\t\t<View>\n\t\t\t\t<TouchableOpacity\n\t\t\t\t\tstyle={{ alignSelf: 'center', marginTop: 16 }}\n\t\t\t\t\tonPress={() => navigation.navigate('Home')}\n\t\t\t\t>\n\t\t\t\t\t<Icon name=\"arrow-back\" size={35} style={{ marginLeft: 16, marginBottom: 10 }} />\n\t\t\t\t</TouchableOpacity>\n\t\t\t</View>\n\t\t),\n\t\theaderRight: () => <View></View>\n\t});\n\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tloading: false,\n\t\t\trefresh: false,\n\t\t\tdevices: [],\n\t\t\temail: '',\n\t\t\tname: '',\n\t\t\tsharedAccount: {}\n\t\t};\n\t\tthis.ModalRef = React.createRef();\n\t}\n\n\tUNSAFE_componentWillMount() {\n\t\tconst { navigation } = this.props;\n\t\tconst sharedAcc = navigation.getParam('sharedAccount').sharedAccount;\n\t\tconst devices = sharedAcc.devices;\n\t\tconst guest_email = sharedAcc.guest_email;\n\t\tconst name = sharedAcc.name;\n\t\tif (sharedAcc != null) {\n\t\t\tthis.setState({\n\t\t\t\temail: guest_email,\n\t\t\t\tname: name,\n\t\t\t\tsharedAccount: sharedAcc\n\t\t\t});\n\t\t}\n\t\tif (devices != null) {\n\t\t\tthis.setState({\n\t\t\t\tdevices: devices\n\t\t\t});\n\t\t}\n\t}\n\n\tUNSAFE_componentWillReceiveProps(props) {\n\t\tthis.setState({\n\t\t\trefresh: !this.state.refresh\n\t\t});\n\n\t\tif (!this.state.loading && props.StopShareState.loading) {\n\t\t\tthis.setState({\n\t\t\t\tloading: true\n\t\t\t});\n\t\t\tthis.props.screenProps.setLoadingTrue();\n\t\t}\n\n\t\tif (this.state.loading && !props.StopShareState.loading) {\n\t\t\tthis.setState({\n\t\t\t\tloading: false\n\t\t\t});\n\t\t\tthis.props.screenProps.setLoadingFalse();\n\t\t\tthis.props.navigation.navigate('Home');\n\t\t}\n\n\t\tif (props.sharedAccountsData != null) {\n\t\t\tthis.getSharedAccountDevicesFromRedux(this.state.email, props.sharedAccountsData.sharedAccounts);\n\t\t}\n\t}\n\n\tasync openModal() {\n\t\tawait this.setState({ selecteddevice: null });\n\t\tthis.ModalRef.current.snapTo(0);\n\t}\n\n\tasync selectDevice(device) {\n\t\t// You have to map the devices into another layout for the ShareModal to read it\n\t\tawait Object.keys(this.props.devicesData.devices).map(async (item, index) => {\n\t\t\tif (this.props.devicesData.devices[item].title == device.name) {\n\t\t\t\tawait this.setState({ selecteddevice: this.props.devicesData.devices[item] });\n\t\t\t}\n\t\t});\n\t\tthis.ModalRef.current.snapTo(0);\n\t}\n\n\tendAllSharing(login_id, devices, idToken) {\n\t\t//console.log(login_id);\n\t\tthis.props.stopSharing(login_id, devices, idToken);\n\t}\n\n\tgetSharedAccountDevicesFromRedux(email, sharedAccounts) {\n\t\tconst Account = sharedAccounts.find((faccount) => faccount.guest_email == email);\n\t\tif (Account != null && Account.devices != null) {\n\t\t\tthis.setState({\n\t\t\t\tdevices: Account.devices\n\t\t\t});\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<View style={{ flex: 1 }}>\n\t\t\t\t<View style={appStyle.container}>\n\t\t\t\t\t<View style={[appStyle.card, { paddingHorizontal: 20 }]}>\n\t\t\t\t\t\t<Header open={this.openModal.bind(this)} guest_email={this.state.email} />\n\n\t\t\t\t\t\t<View style={[appStyle.lineSeperatorFullAlt, { marginTop: 5 }]} />\n\n\t\t\t\t\t\t<View style={appStyle.column}>\n\t\t\t\t\t\t\t{this.state.devices != null &&\n\t\t\t\t\t\t\t\tthis.state.devices.map((device, index) => (\n\t\t\t\t\t\t\t\t\t<View key={index} style={{ height: 65 }}>\n\t\t\t\t\t\t\t\t\t\t<DeviceItem\n\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\tdevice={device}\n\t\t\t\t\t\t\t\t\t\t\tnavigation={this.props.navigation}\n\t\t\t\t\t\t\t\t\t\t\tselected={this.selectDevice.bind(this)}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t<View style={[appStyle.lineSeperatorAlt]} />\n\t\t\t\t\t\t\t\t\t</View>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</View>\n\t\t\t\t\t\t<Footer\n\t\t\t\t\t\t\tname={this.state.name}\n\t\t\t\t\t\t\tendSharing={() =>\n\t\t\t\t\t\t\t\tthis.endAllSharing(\n\t\t\t\t\t\t\t\t\tthis.state.sharedAccount.login_credentials_id,\n\t\t\t\t\t\t\t\t\tthis.state.devices,\n\t\t\t\t\t\t\t\t\tthis.props.sessionData.idToken\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</View>\n\t\t\t\t</View>\n\t\t\t\t<View style={{ elevation: 5, flex: 1 }}>\n\t\t\t\t\t<ShareModal\n\t\t\t\t\t\tModalRef={this.ModalRef}\n\t\t\t\t\t\tcanEditUser={false}\n\t\t\t\t\t\tselecteduser={this.state.sharedAccount}\n\t\t\t\t\t\tselecteddevice={this.state.selecteddevice}\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nconst styles = StyleSheet.create({\n\tcontainer: {\n\t\tflex: 1\n\t},\n\theader: {\n\t\tflexDirection: 'row',\n\t\tjustifyContent: 'space-between'\n\t}\n});\n\nconst mapStateToProps = (state) => {\n\tconst { devicesData, hubInfoData, sessionData, sharedAccountsData, StopShareState } = state;\n\treturn { devicesData, hubInfoData, sessionData, sharedAccountsData, StopShareState };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tstopSharing: (login_id, devices, idToken) => {\n\t\t\tdispatch(stopSharingAction(login_id, devices, idToken));\n\t\t}\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UserScreen);\n"]},"metadata":{},"sourceType":"module"}