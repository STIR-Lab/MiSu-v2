{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/mnt/c/Users/SBS31/OneDrive/Desktop/real-SD/MiSu-v2/screens/Application/LogScreen.js\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { Auth } from 'aws-amplify';\nimport React from 'react';\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Icon from \"@expo/vector-icons/MaterialIcons\";\nimport { connect } from 'react-redux';\nimport { getHubInfoAction } from \"../../redux/Action/getHubInfoAction\";\nimport { registerHubAction } from \"../../redux/Action/registerHubAction\";\nimport appStyle from \"../../styles/AppStyle\";\nimport LogCard from \"../../components/cards/LogCard\";\nimport AppText from \"../../components/app/AppText\";\nimport AppHeaderText from \"../../components/app/AppHeaderText\";\n\nvar LogScreen = function (_React$Component) {\n  _inherits(LogScreen, _React$Component);\n\n  var _super = _createSuper(LogScreen);\n\n  function LogScreen() {\n    var _this;\n\n    _classCallCheck(this, LogScreen);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      usageLogs: [],\n      accessLogs: []\n    };\n\n    _this.getUsageLogs = function _callee() {\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(fetch('https://c8zta83ta5.execute-api.us-east-1.amazonaws.com/test/getusagelogs', {\n                method: 'GET',\n                headers: {\n                  Authorization: 'Bearer ' + _this.props.sessionData.idToken\n                }\n              }).then(function (response) {\n                return response.json();\n              }).then(function (data) {\n                if (data.message.length > 0) {\n                  var sortedLogs = data.message.sort(function (a, b) {\n                    return a.date < b.date ? 1 : a.date === b.date ? a.time < b.time ? 1 : -1 : -1;\n                  });\n\n                  _this.setState({\n                    usageLogs: sortedLogs\n                  });\n                }\n              }).catch(function (error) {\n                _this.setState({\n                  error: error\n                });\n              }));\n\n            case 2:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.getAccessLogs = function _callee2() {\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(fetch('https://c8zta83ta5.execute-api.us-east-1.amazonaws.com/test/getaccesslogs', {\n                method: 'GET',\n                headers: {\n                  Authorization: 'Bearer ' + _this.props.sessionData.idToken\n                }\n              }).then(function (response) {\n                return response.json();\n              }).then(function (data) {\n                if (data.message.length > 0) {\n                  var sortedLogs = data.message.sort(function (a, b) {\n                    return a.date < b.date ? 1 : a.date === b.date ? a.time < b.time ? 1 : -1 : -1;\n                  });\n\n                  _this.setState({\n                    accessLogs: sortedLogs\n                  });\n                }\n              }).catch(function (error) {\n                _this.setState({\n                  error: error\n                });\n              }));\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.renderLogs = function () {\n      if (_this.state.usageLogs.length > 0 && _this.state.accessLogs <= 0) {\n        return React.createElement(LogCard, {\n          type: \"Activity\",\n          logs: _this.state.usageLogs,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 11\n          }\n        });\n      } else if (_this.state.accessLogs.length > 0 && _this.state.usageLogs <= 0) {\n        return React.createElement(LogCard, {\n          type: \"Access\",\n          logs: _this.state.accessLogs,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 11\n          }\n        });\n      } else if (_this.state.accessLogs.length > 0 && _this.state.usageLogs > 0) {\n        return React.createElement(View, {\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 5\n          }\n        }, React.createElement(LogCard, {\n          type: \"Activity\",\n          logs: _this.state.usageLogs,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 6\n          }\n        }), React.createElement(LogCard, {\n          type: \"Access\",\n          logs: _this.state.accessLogs,\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 6\n          }\n        }));\n      } else return React.createElement(View, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 5\n        }\n      }, React.createElement(AppHeaderText, {\n        style: {\n          fontSize: 18,\n          marginLeft: 10\n        },\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 6\n        }\n      }, \"Loading...\"));\n    };\n\n    return _this;\n  }\n\n  _createClass(LogScreen, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getUsageLogs();\n      this.getAccessLogs();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(View, {\n        style: [appStyle.container, {\n          alignItems: 'stretch',\n          marginHorizontal: -5\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 4\n        }\n      }, React.createElement(ScrollView, {\n        style: appStyle.scrollView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 5\n        }\n      }, this.renderLogs()));\n    }\n  }]);\n\n  return LogScreen;\n}(React.Component);\n\nLogScreen.navigationOptions = function (_ref) {\n  var navigate = _ref.navigate,\n      navigation = _ref.navigation;\n  return {\n    headerTitle: navigation.getParam('device', '').name,\n    headerLeft: function headerLeft() {\n      return React.createElement(View, {\n        __self: LogScreen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 17,\n          columnNumber: 4\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: {\n          alignSelf: 'center',\n          marginTop: 16\n        },\n        onPress: function onPress() {\n          return navigation.navigate('Home');\n        },\n        __self: LogScreen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 18,\n          columnNumber: 5\n        }\n      }, React.createElement(Icon, {\n        name: \"arrow-back\",\n        size: 35,\n        style: {\n          marginLeft: 16,\n          marginBottom: 10\n        },\n        __self: LogScreen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 22,\n          columnNumber: 6\n        }\n      })));\n    },\n    headerRight: function headerRight() {\n      return React.createElement(View, {\n        __self: LogScreen,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 26,\n          columnNumber: 22\n        }\n      });\n    }\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  var hubInfoData = state.hubInfoData,\n      sessionData = state.sessionData,\n      sharedAccountsData = state.sharedAccountsData,\n      registerData = state.registerData;\n  return {\n    hubInfoData: hubInfoData,\n    sessionData: sessionData,\n    sharedAccountsData: sharedAccountsData,\n    registerData: registerData\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    register: function register(data, idToken) {\n      return dispatch(registerHubAction(data, idToken));\n    },\n    getHub: function getHub(idToken) {\n      return dispatch(getHubInfoAction(idToken));\n    }\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LogScreen);","map":{"version":3,"sources":["/mnt/c/Users/SBS31/OneDrive/Desktop/real-SD/MiSu-v2/screens/Application/LogScreen.js"],"names":["Auth","React","Icon","connect","getHubInfoAction","registerHubAction","appStyle","LogCard","AppText","AppHeaderText","LogScreen","state","usageLogs","accessLogs","getUsageLogs","fetch","method","headers","Authorization","props","sessionData","idToken","then","response","json","data","message","length","sortedLogs","sort","a","b","date","time","setState","catch","error","getAccessLogs","renderLogs","fontSize","marginLeft","container","alignItems","marginHorizontal","scrollView","Component","navigationOptions","navigate","navigation","headerTitle","getParam","name","headerLeft","alignSelf","marginTop","marginBottom","headerRight","mapStateToProps","hubInfoData","sharedAccountsData","registerData","mapDispatchToProps","dispatch","register","getHub"],"mappings":"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","sourcesContent":["import { Auth } from 'aws-amplify';\nimport React from 'react';\nimport { TouchableOpacity, View, ScrollView, Text } from 'react-native';\nimport Icon from 'react-native-vector-icons/MaterialIcons';\nimport { connect } from 'react-redux';\nimport { getHubInfoAction } from '../../redux/Action/getHubInfoAction';\nimport { registerHubAction } from '../../redux/Action/registerHubAction';\nimport appStyle from '../../styles/AppStyle';\nimport LogCard from '../../components/cards/LogCard';\nimport AppText from '../../components/app/AppText';\nimport AppHeaderText from '../../components/app/AppHeaderText';\n\nclass LogScreen extends React.Component {\n\tstatic navigationOptions = ({ navigate, navigation }) => ({\n\t\theaderTitle: navigation.getParam('device', '').name,\n\t\theaderLeft: () => (\n\t\t\t<View>\n\t\t\t\t<TouchableOpacity\n\t\t\t\t\tstyle={{ alignSelf: 'center', marginTop: 16 }}\n\t\t\t\t\tonPress={() => navigation.navigate('Home')}\n\t\t\t\t>\n\t\t\t\t\t<Icon name=\"arrow-back\" size={35} style={{ marginLeft: 16, marginBottom: 10 }} />\n\t\t\t\t</TouchableOpacity>\n\t\t\t</View>\n\t\t),\n\t\theaderRight: () => <View></View>\n\t});\n\n\tstate = {\n\t\tusageLogs: [],\n\t\taccessLogs: []\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.getUsageLogs();\n\t\tthis.getAccessLogs();\n\t}\n\n\t// Gets the logs for the devices the user has shared\n\tgetUsageLogs = async () => {\n\t\tawait fetch('https://c8zta83ta5.execute-api.us-east-1.amazonaws.com/test/getusagelogs', {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\tAuthorization: 'Bearer ' + this.props.sessionData.idToken\n\t\t\t}\n\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\t//console.log(\"%j\", \"Usage Logs\", data.message);\n\t\t\t\tif (data.message.length > 0) {\n\t\t\t\t\tvar sortedLogs = data.message.sort((a, b) =>\n\t\t\t\t\t\ta.date < b.date ? 1 : a.date === b.date ? (a.time < b.time ? 1 : -1) : -1\n\t\t\t\t\t);\n\t\t\t\t\tthis.setState({ usageLogs: sortedLogs });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\t//console.error('getUsageLogs error:', error);\n\t\t\t\tthis.setState({ error });\n\t\t\t});\n\t};\n\n\t// Gets the logs for the access which may have been granted or revoked to the user\n\tgetAccessLogs = async () => {\n\t\tawait fetch('https://c8zta83ta5.execute-api.us-east-1.amazonaws.com/test/getaccesslogs', {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\tAuthorization: 'Bearer ' + this.props.sessionData.idToken\n\t\t\t}\n\t\t})\n\t\t\t.then((response) => response.json())\n\t\t\t.then((data) => {\n\t\t\t\t//console.log(\"%j\", \"Access Logs\", data.message);\n\t\t\t\tif (data.message.length > 0) {\n\t\t\t\t\tvar sortedLogs = data.message.sort((a, b) =>\n\t\t\t\t\t\ta.date < b.date ? 1 : a.date === b.date ? (a.time < b.time ? 1 : -1) : -1\n\t\t\t\t\t);\n\t\t\t\t\tthis.setState({ accessLogs: sortedLogs });\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\t//console.error('getAccessLogs error:', error);\n\t\t\t\tthis.setState({ error });\n\t\t\t});\n\t};\n\n\trenderLogs = () => {\n\t\tif (this.state.usageLogs.length > 0 && this.state.accessLogs <= 0) {\n\t\t\treturn <LogCard type=\"Activity\" logs={this.state.usageLogs} />;\n\t\t} else if (this.state.accessLogs.length > 0 && this.state.usageLogs <= 0) {\n\t\t\treturn <LogCard type=\"Access\" logs={this.state.accessLogs} />;\n\t\t} else if (this.state.accessLogs.length > 0 && this.state.usageLogs > 0) {\n\t\t\treturn (\n\t\t\t\t<View>\n\t\t\t\t\t<LogCard type=\"Activity\" logs={this.state.usageLogs} />\n\t\t\t\t\t<LogCard type=\"Access\" logs={this.state.accessLogs} />\n\t\t\t\t</View>\n\t\t\t);\n\t\t} else\n\t\t\treturn (\n\t\t\t\t<View>\n\t\t\t\t\t<AppHeaderText style={{ fontSize: 18, marginLeft: 10 }}>Loading...</AppHeaderText>\n\t\t\t\t</View>\n\t\t\t);\n\t};\n\n\trender() {\n\t\treturn (\n\t\t\t<View style={[appStyle.container, { alignItems: 'stretch', marginHorizontal: -5 }]}>\n\t\t\t\t<ScrollView style={appStyle.scrollView}>\n\t\t\t\t\t{this.renderLogs()}\n\t\t\t\t\t{/*\n                    {this.state.usageLogs.length > 0 ? <LogCard type='Usage' logs={this.state.usageLogs}/> : null}\n                    {this.state.accessLogs.length > 0 ? <LogCard type='Access' logs={this.state.accessLogs}/> : null}\n                    */}\n\t\t\t\t\t{/* Usage Logs\n                    {this.state.usageLogs !== null ? <Text>{\"\\n\"}</Text> : null}\n                    {this.state.usageLogs !== null ? <View style={{borderBottomColor: 'black', borderBottomWidth: 3}}/> : null}\n                    {this.state.usageLogs !== null && <Text>Usage Logs</Text>}\n                    <Text>{\"\\n\"}</Text>\n                    {\n                    this.state.usageLogs !== null && this.state.usageLogs.map((log, index) => (\n                    <View key={index}>\n                        <Text style={{marginLeft: 20, fontSize: 18,}}>{log.date} - {log.time}</Text>\n                        <Text >&rarr;User: {log.secondary_user}</Text>\n                        <Text >&rarr;Device: {log.device_name} ({log.device_description})</Text>\n                        <Text >&rarr;Property: {log.property_name}</Text>\n                        <Text >&rarr;Value: {log.value ? \"On\" : \"Off\"}</Text>\n                        <Text>{\"\\n\"}</Text>\n                    </View>\n                    ))\n                    }\n                     */}\n\n\t\t\t\t\t{/* Access Logs\n                    {this.state.accessLogs !== null ? <Text>{\"\\n\"}</Text> : null}\n                    {this.state.accessLogs !== null ? <View style={{borderBottomColor: 'black', borderBottomWidth: 3}}/> : null}\n                    {this.state.accessLogs !== null && <Text>Access Logs</Text>}\n                    <Text>{\"\\n\"}</Text>\n                    {\n                    this.state.accessLogs !== null && this.state.accessLogs.map((log, index) => (\n                        <View key={index}>\n                            <Text style={{marginLeft: 20, fontSize: 18,}}>{log.date} - {log.time}</Text>\n                            <Text >&rarr;Homeowner: {log.primary_user}</Text>\n                            <Text >&rarr;Operation: \n                            {(() => {\n                            if (log.operation === \"Create\")\n                                return \" Gave you access\";\n                            else if (log.operation === \"Delete\")\n                                return \" Revoked your access\";\n                            else if (log.operation === \"Ended sharing early\")\n                                return \" You ended sharing early\";\n                            else \n                                return \" You accepted access\";\n                            })()}</Text>\n                            <Text>{\"\\n\"}</Text>\n                        </View>\n                    ))\n                    } \n                     */}\n\t\t\t\t</ScrollView>\n\t\t\t</View>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\tconst { hubInfoData, sessionData, sharedAccountsData, registerData } = state;\n\treturn { hubInfoData, sessionData, sharedAccountsData, registerData };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tregister: (data, idToken) => dispatch(registerHubAction(data, idToken)),\n\t\tgetHub: (idToken) => dispatch(getHubInfoAction(idToken))\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LogScreen);\n"]},"metadata":{},"sourceType":"module"}